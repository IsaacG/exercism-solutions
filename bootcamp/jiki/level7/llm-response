function to_int with iterable do
  set out to 0
  for each char in iterable do
    if my#is_digit(char) do
      change out to out * 10 + string_to_number(char)
    end
  end
  return out
end

function ask_llm with question do
  set got to fetch("https://myllm.com/api/v2/qanda", {"question": question})
  set best to 0
  set result to ""
  for each answer in got["response"]["answers"] do
    if string_to_number(answer["certainty"]) > best do
      change result to answer["text"]
      change best to string_to_number(answer["certainty"])
    end
  end
  return concatenate("The answer to '", question, "' is '", result, "' (", number_to_string(100 * best), "% certainty in ", number_to_string(to_int(got["meta"]["time"]) / 1000), "s).")
end
